{#
  Copyright: (c) 2014 by Petr Zemek <s3rvac@gmail.com> and contributors
  License: BSD, see LICENSE for more details
#}

{% extends "base.html" %}

{% macro display_commit(commit) -%}
	<div>
		{% if commit_details_url_fmt %}
			<a href="{{ commit_details_url_fmt.format(commit.hash) }}">{{ commit.short_hash() }}</a>
		{% else %}
			{{ commit.short_hash() }}
		{% endif %}
		{{ commit.date }}
		<a href="mailto:{{ commit.email }}">{{ commit.author }}</a>
		{{ commit.subject }}
	</div>
{%- endmacro %}

{% macro display_branch(branch) -%}
	<li>
		{{ branch.name }} ({{ branch.age }})
		<ul>
			<li>{{ display_commit(branch.commit) }}</li>
		</ul>
	</li>
{%- endmacro %}

{% block body %}
<h1>Branches In '{{ repo_name }}' On '{{ remote }}'</h1>

<ul>
	{% for branch in shown_branches %}
		{{ display_branch(branch) }}
	{% endfor %}
</ul>

<h2>Ignored</h2>
<ul>
	{% for branch in ignored_branches %}
	<li>
		{{ branch.name }}
	</li>
	{% endfor %}
</ul>
{% endblock %}
